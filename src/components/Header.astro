---
const navLinks = [
  { href: '/about', label: 'About' },
  { href: '/services', label: 'Services' },
  { href: '/destinations', label: 'Destinations' },
  { href: '/blog', label: 'Journal' },
  { href: '/contact', label: 'Contact' },
];
---

<header class="fixed top-0 left-0 right-0 z-50 mix-blend-difference">
  <nav class="px-6 md:px-10 lg:px-16 py-6 flex items-center justify-between">
    <!-- Logo -->
    <a href="/" class="group flex items-center gap-3">
      <span class="text-white text-2xl md:text-3xl font-display font-medium tracking-tight">
        Wyld Wandering
      </span>
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden lg:flex items-center gap-10">
      {navLinks.map(link => (
        <a
          href={link.href}
          class="text-white text-sm font-medium tracking-wide uppercase link-underline py-1"
        >
          {link.label}
        </a>
      ))}

      <!-- Theme Toggle -->
      <button
        id="theme-toggle"
        class="text-white p-2 hover:opacity-70 transition-opacity"
        aria-label="Toggle theme"
      >
        <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
      </button>
    </div>

    <!-- Mobile Menu Button -->
    <div class="flex items-center gap-4 lg:hidden">
      <button
        id="theme-toggle-mobile"
        class="text-white p-2"
        aria-label="Toggle theme"
      >
        <svg class="w-5 h-5 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <svg class="w-5 h-5 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
      </button>
      <button
        id="mobile-menu-btn"
        class="text-white p-2"
        aria-label="Toggle menu"
      >
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path id="menu-icon" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </nav>
</header>

<!-- Mobile Menu Overlay -->
<div id="mobile-menu" class="fixed inset-0 z-40 hidden">
  <div class="absolute inset-0 bg-charcoal-900 dark:bg-forest-900">
    <div class="flex flex-col items-center justify-center h-full gap-8">
      <a href="/" class="text-cream-100 text-4xl font-display font-medium">Home</a>
      {navLinks.map(link => (
        <a
          href={link.href}
          class="text-cream-100 text-4xl font-display font-medium hover:text-terracotta-500 dark:hover:text-amber-400 transition-colors"
        >
          {link.label}
        </a>
      ))}
    </div>
  </div>
</div>

<script>
  // Theme toggle functionality
  function setupThemeToggle() {
    const toggles = document.querySelectorAll('#theme-toggle, #theme-toggle-mobile');

    toggles.forEach(toggle => {
      toggle?.addEventListener('click', () => {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });
    });
  }

  // Mobile menu functionality
  function setupMobileMenu() {
    const btn = document.getElementById('mobile-menu-btn');
    const menu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    let isOpen = false;

    btn?.addEventListener('click', () => {
      isOpen = !isOpen;
      menu?.classList.toggle('hidden');

      if (isOpen) {
        menuIcon?.setAttribute('d', 'M6 18L18 6M6 6l12 12');
        document.body.style.overflow = 'hidden';
      } else {
        menuIcon?.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
        document.body.style.overflow = '';
      }
    });

    // Close menu when clicking a link
    menu?.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        menu.classList.add('hidden');
        menuIcon?.setAttribute('d', 'M4 6h16M4 12h16M4 18h16');
        document.body.style.overflow = '';
        isOpen = false;
      });
    });
  }

  setupThemeToggle();
  setupMobileMenu();

  // Re-run on page navigation (for Astro)
  document.addEventListener('astro:page-load', () => {
    setupThemeToggle();
    setupMobileMenu();
  });
</script>
